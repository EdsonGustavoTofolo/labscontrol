<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:labs="http://java.sun.com/jsf/composite/labscontrol">
<ui:decorate template="../../template/padrao.xhtml">
    <ui:define name="titulo">
        <h:outputText value="#{form.cadastroDeMaterial}"/>
    </ui:define>

    <ui:define name="conteudo">
        <p:panelGrid columns="2">

        </p:panelGrid>
        <p:panelGrid columns="2" id="mainGrid">
            <h:outputLabel value="#{form.id}"/>
            <p:inputText value="#{materialController.entity.id}" readonly="true" size="5"/>

            <h:outputLabel value="#{form.foto}"/>
            <p:fileUpload value="#{materialController.uploadedFile}" mode="advanced" dragDropSupport="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileLimit="1"
                          fileUploadListener="#{materialController.fileUploadListener}"
                          invalidFileMessage="#{msg.arquivoInvalido}" fileLimitMessage="#{msg.nroMaxDeArquivo}"
                          cancelLabel="#{form.cancelar}" label="#{form.selecionarArquivo}" />

            <h:outputLabel value="#{form.nome}"/>
            <p:inputText value="#{materialController.entity.nome}" size="60" maxlength="45" required="true" requiredMessage="#{msg.nomeRequired}"/>

            <h:outputLabel value="#{form.tipo}"/>
            <p:selectOneRadio id="tipo" value="#{materialController.tipo}" required="true" requiredMessage="#{msg.tipoMaterialRequired}">
                <f:selectItem itemLabel="#{form.materialDeConsumo}" itemValue="M" />
                <f:selectItem itemLabel="#{form.equipamento}" itemValue="E" />
                <p:ajax event="change" update=":form:materialDeConsumo, :form:equipamento"/>
            </p:selectOneRadio>

            <h:outputLabel value="#{form.materialDeConsumo}" for="materialDeConsumo"/>
            <p:autoComplete value="#{materialController.entity.materialDeConsumo}"
                            completeMethod="#{materialController.completeMaterialDeConsumo}"
                            converter="#{materialDeConsumoConverter}"
                            label="#{form.materialDeConsumo}" id="materialDeConsumo" var="materialDeConsumo"
                            itemLabel="#{materialDeConsumo.nome}" itemValue="#{materialDeConsumo}"
                            dropdown="true" forceSelection="true" size="60"
                            disabled="#{!materialController.tipo.equals('M')}" />

            <h:outputLabel value="#{form.equipamento}" for="equipamento"/>
            <p:autoComplete value="#{materialController.entity.equipamento}"
                            completeMethod="#{materialController.completeEquipamento}"
                            converter="#{equipamentoConverter}"
                            label="#{form.equipamento}" id="equipamento" var="equipamento"
                            itemLabel="#{equipamento.nome}" itemValue="#{equipamento}"
                            dropdown="true" forceSelection="true" size="60"
                            disabled="#{!materialController.tipo.equals('E')}"/>

            <h:outputLabel value="#{form.categoria}" for="categoria"/>
            <p:autoComplete value="#{materialController.entity.categoria}"
                            completeMethod="#{materialController.completeCategoria}"
                            converter="#{categoriaConverter}"
                            label="#{form.equipamento}" id="categoria" var="categoria"
                            itemLabel="#{categoria.nome}" itemValue="#{categoria}"
                            dropdown="true" forceSelection="true" size="60"/>

            <h:outputLabel value="#{form.marca}" for="marca"/>
            <p:autoComplete value="#{materialController.entity.marca}"
                            completeMethod="#{materialController.completeMarca}"
                            converter="#{marcaConverter}"
                            label="#{form.marca}" id="marca" var="marca"
                            itemLabel="#{marca.nome}" itemValue="#{marca}"
                            dropdown="true" forceSelection="true" size="60"/>

            <h:outputLabel value="#{form.modelo}" for="modelo"/>
            <p:autoComplete value="#{materialController.entity.modelo}"
                            completeMethod="#{materialController.completeModelo}"
                            converter="#{modeloConverter}"
                            label="#{form.modelo}" id="modelo" var="modelo"
                            itemLabel="#{modelo.nome}" itemValue="#{modelo}"
                            dropdown="true" forceSelection="true" size="60"/>

            <h:outputLabel value="#{form.fornecedor}" for="fornecedor"/>
            <p:autoComplete value="#{materialController.entity.fornecedor}"
                            completeMethod="#{materialController.completeFornecedor}"
                            converter="#{fornecedorConverter}"
                            label="#{form.fornecedor}" id="fornecedor" var="fornecedor"
                            itemLabel="#{fornecedor.nomeFantasia}" itemValue="#{fornecedor}"
                            dropdown="true" forceSelection="true" size="60"/>
        </p:panelGrid>
    </ui:define>

    <ui:define name="rodape">
        <labs:commandButtonForm update="@form" controller="#{materialController}"/>

        <p:commandButton value="#{form.voltar}" action="/pages/cadastros/material/materialSearch.xhtml?faces-redirect=true" icon="ui-icon ui-icon-arrowthick-1-w"
                         immediate="true" ajax="false" style="float: right"/>
        <div style="clear: both"></div>
    </ui:define>
</ui:decorate>
</html>
