<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>
        <ui:insert name="titulo">
            <h:outputText value="LabsControl - UTFPR/PB"/>
        </ui:insert>
    </title>
    <h:outputStylesheet library="css" name="alertify.core.css"/>
    <h:outputStylesheet library="css" name="alertify.default.css"/>
    <h:outputStylesheet library="css" name="menu.css"/>
    <h:outputStylesheet library="css" name="customPrime.css"/>
    <h:outputStylesheet library="css" name="default.css"/>
    <h:outputScript name="locale-primefaces.js" library="js" />
    <h:outputScript name="alertify.min.js" library="js" />
    <h:outputScript name="application.js" library="js" />
    <h:outputScript name="bootstrap.min.js" library="js" />
    <script type="text/javascript">
        $(document).ready(function () {
            var url = location.href;
            if (url.indexOf("?") > 0) {
                query = url.split("?");
                param = query[1];
                if (param.indexOf("logou") >= 0) {
                    alertify.success("Usuário logado com sucesso!");
                    window.history.pushState('', '', '/labscontrol/pages/index.xhtml');
                }
            }
        });
    </script>
</h:head>

<h:body>
    <f:view>
        <div id="header">
            <div id="imglogo">
                <p:graphicImage value="#" alt="Home - UTFPR"/>
            </div>
            <div id="infoLogin">
                Você está logado como <h:outputText value="#{usuarioController.getUsuarioLogadoNome()} " />
                <h:outputLink value="#{request.contextPath}/j_spring_security_logout">
                    <h:outputLabel value="#{form.sair}"/>
                </h:outputLink>
            </div>
        </div>

        <f:metadata>
            <ui:insert name="metadata">

            </ui:insert>
        </f:metadata>

        <h:form id="form" enctype="multipart/form-data">

            <p:focus for="form"/>

            <p:menubar autoDisplay="false" styleClass="vs-menu">
                <p:menuitem value="#{form.home}" url="/pages/index.xhtml?faces-redirect=true" icon="ui-icon-home" />

                <p:submenu label="#{form.cadastros}" icon="ui-icon-document">

                    <p:submenu label="#{form.ambiente}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/ambiente/ambienteForm.xhtml?faces-redirect=true" />
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/ambiente/ambienteSearch.xhtml?faces-redirect=true" />
                    </p:submenu>

                    <p:submenu label="#{form.fornecedor}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/fornecedor/fornecedorForm.xhtml?faces-redirect=true" />
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/fornecedor/fornecedorSearch.xhtml?faces-redirect=true" />
                    </p:submenu>

                    <p:submenu label="#{form.materialDeConsumo}" icon="ui-icon-wrench">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/materialdeconsumo/materialDeConsumoForm.xhtml?faces-redirect=true"
                                    rendered="#{usuarioController.somenteAdmEatendente()}"/>
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/materialdeconsumo/materialDeConsumoSearch.xhtml?faces-redirect=true" />
                        <p:separator />
                        <p:submenu label="#{form.cadastros}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                            <p:submenu label="#{form.marcas}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/marca/material/marcaMaterialForm.xhtml?faces-redirect=true" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/marca/material/marcaMaterialSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                            <p:submenu label="#{form.modelos}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/modelo/material/modeloMaterialForm.xhtml?faces-redirect=true" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/modelo/material/modeloMaterialSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                            <p:submenu label="#{form.categorias}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/categoria/material/categoriaMaterialForm.xhtml?faces-redirect=true" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/categoria/material/categoriaMaterialSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                        </p:submenu>
                        <p:separator />
                        <p:submenu label="#{form.movimentacao}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                            <p:submenu label="#{form.entrada}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" action="#{materialDeConsumoController.movimentaEntrada}" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/movimentos/entrada/entradaSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                            <p:submenu label="#{form.saida}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" action="#{materialDeConsumoController.movimentaSaida}" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/movimentos/saida/saidaSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                        </p:submenu>
                    </p:submenu>

                    <p:submenu label="#{form.equipamento}" icon="ui-icon-wrench">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/equipamento/equipamentoForm.xhtml?faces-redirect=true"
                                    rendered="#{usuarioController.somenteAdmEatendente()}"/>
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/equipamento/equipamentoSearch.xhtml?faces-redirect=true" />
                        <p:separator />
                        <p:submenu label="#{form.cadastros}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                            <p:submenu label="#{form.marcas}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/marca/equipamento/marcaEquipamentoForm.xhtml?faces-redirect=true" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/marca/equipamento/marcaEquipamentoSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                            <p:submenu label="#{form.modelos}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/modelo/equipamento/modeloEquipamentoForm.xhtml?faces-redirect=true" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/modelo/equipamento/modeloEquipamentoSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                            <p:submenu label="#{form.categorias}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/categoria/equipamento/categoriaEquipamentoForm.xhtml?faces-redirect=true" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/categoria/equipamento/categoriaEquipamentoSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                        </p:submenu>
                        <p:separator />
                        <p:submenu label="#{form.movimentacao}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                            <p:submenu label="#{form.entrada}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" action="#{equipamentoController.movimentaEntrada}" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/movimentos/entrada/entradaSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                            <p:submenu label="#{form.saida}" icon="ui-icon-wrench">
                                <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" action="#{equipamentoController.movimentaSaida}" />
                                <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/movimentos/saida/saidaSearch.xhtml?faces-redirect=true" />
                            </p:submenu>
                        </p:submenu>
                    </p:submenu>

                    <p:submenu label="#{form.usuario}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdm()}">
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/usuario/usuarioSearch.xhtml?faces-redirect=true" />
                    </p:submenu>

                    <p:submenu label="#{form.cfgEnvioEmail}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdm()}">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/cadastros/cfgenvioemail/cfgEnvioEmailForm.xhtml?faces-redirect=true" />
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/cadastros/cfgenvioemail/cfgEnvioEmailSearch.xhtml?faces-redirect=true" />
                    </p:submenu>

                </p:submenu>

                <p:submenu label="#{form.movimentos}" icon="ui-icon-wrench" rendered="#{usuarioController.somenteAdmEatendente()}">
                    <p:submenu label="#{form.entrada}" icon="ui-icon-wrench">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/movimentos/entrada/entradaForm.xhtml?faces-redirect=true" />
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/movimentos/entrada/entradaSearch.xhtml?faces-redirect=true" />
                    </p:submenu>
                    <p:submenu label="#{form.saida}" icon="ui-icon-wrench">
                        <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/movimentos/saida/saidaForm.xhtml?faces-redirect=true" />
                        <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/movimentos/saida/saidaSearch.xhtml?faces-redirect=true" />
                    </p:submenu>
                </p:submenu>

                <p:submenu label="#{form.emprestimo}" icon="ui-icon-wrench">
                    <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="/pages/emprestimo/emprestimoForm.xhtml?faces-redirect=true" />
                    <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="/pages/emprestimo/emprestimoSearch.xhtml?faces-redirect=true" />
                </p:submenu>

                <p:submenu label="#{form.reserva}" icon="ui-icon-wrench">
                    <p:menuitem value="#{form.cadastro}" icon="ui-icon-plusthick" url="#" />
                    <p:menuitem value="#{form.pesquisa}" icon="ui-icon-search" url="#" />
                </p:submenu>

                <p:submenu label="#{form.relatorios}" icon="ui-icon-document" rendered="#{usuarioController.somenteAdmEatendente()}">
                    <p:menuitem value="#{form.relatorios}" icon="ui-icon-document" url="#" />
                </p:submenu>
            </p:menubar>

            <ui:insert name="botoesParaForm">

            </ui:insert>

            <p:panel id="pnlMain">

                <f:facet name="header">
                    <ui:insert name="titulo">
                        <h:outputText value="LabsControl"/>
                    </ui:insert>
                </f:facet>

                <p:messages id="messages" closable="true" />

                <ui:insert name="conteudo">

                </ui:insert>

                <f:facet name="footer">
                    <ui:insert name="rodape">

                    </ui:insert>
                </f:facet>
            </p:panel>

            <ui:insert name="otherContent">

            </ui:insert>

            <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

            <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false" styleClass="loader">
                <h:outputText value="Trabalhando, aguarde!" />
            </p:dialog>
        </h:form>

        <ui:insert name="foraDoForm">

        </ui:insert>
    </f:view>
</h:body>
</html>
